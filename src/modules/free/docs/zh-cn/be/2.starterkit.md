## 脚手架

FreeEIS后端开发通过FreeEIS脚手架工程开始。脚手架工程做为模块开发的基础，同时也是系统集成的基础，任何模块的运行都需要通过脚手架工程来完成。

### 运行


```sh
# 安装后端脚手架
$ git clone https://github.com/freeeis/free-be-starter-kit.git be

# 安装依赖包
$ cd be
$ yarn install

# 运行
$ yarn start
```

此时可以通过浏览器访问接口`http://localhost:8000/api/nothing`将得到返回结果`{"data":{},"msg":"OK"}`，说明你的后端脚手架已经运行成功。

另需要注意的是，在脚手架中，默认加入了一些内置模块，在后面的章节开始介绍实际的开发内容前会有详细的说明如何禁用内置模块，以从一个更加“干净”的环境开始创建自己的模块。

### 目录结构

FreeEIS脚手架目录结构如下：

```
--- app
  -- bin
  -- config
    -- config.default.js
    -- config.development.js
    -- config.production.js
    -- config.test.js
  -- modules
  -- test
  -- utils
  -- app.js
  -- global.js

```

在这个目录结构中：
  - `bin`，FreeEIS运行不同环境的入口。
  - `config`，配置文件存放位置，用于配置FreeEIS中不同运行环境下的全局配置信息，也可以用以覆盖各模块的默认配置以达到定制使用模块的目标。默认我们放入了三个环境的配置文件，development，test和production，但你完全可以根据自己的需要扩充。
    - `config.default.js`，默认配置，所有环境公用的配置信息，或默认的配置信息。会被下面特定运行环境的配置信息覆盖（或扩展）。
    - `config.development.js`，开发环境中的配置信息。
    - `config.production.js`，生产环境中的配置信息。
    - `config.test.js`，测试环境中的配置信息。
  - `modules`，FreeEIS模块存放目录，模块可以直接保存在此目录中，也可以使用git submodule等功能引用。
  - `test`，测试代码目录。
  - `utils`，全局工具方法存放目录。我们并不建议使用全局工具，因为那样将导致某些模块不能独立开发，而必须要依赖于拥有此工具的工程，但在某些特殊场景下提取公用工具是必要的，所以我们保留了此能力。
  - `app.js`，代码入口，调用FreeEIS内核模块并载入和运行所需要的其他模块。
  - `global.js`，全局密钥存放文件，此文件中保存系统中各模块需要的密钥等机密信息，不应该上传到代码仓库！！部署时，应该通过手动写入服务器等方法确保机密信息的安全。


### 可以做的事情

当脚手架工程成功运行后，我们已经可以开始实际的开发工作，我们可以做这些事情：

 - 根据需要修改`config`目录中相应环境的配置信息。
 - 在`modules`目录中添加新的功能模块。
 - 在`utils`目录中添加全局工具。

 但这些工作在通常的开发过程中不一定需要全都做，当我们考虑不同开发人员角色的时候，可以做如下拆分：

#### 模块开发人员

模块开发人员通常只需要：

 - 在`modules`目录中添加新的功能模块。

#### 系统集成人员

系统集成人员通常需要：

 - 根据需要修改`config`目录中相应环境的配置信息。
 - 在`modules`目录中引入需要的功能模块。


我们将分别做详细的介绍。

