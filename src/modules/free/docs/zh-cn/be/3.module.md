## æ¨¡å—å¼€å‘

### ä¿®æ”¹å¯åŠ¨æ¨¡å—

å‰é¢æåˆ°è¿‡ï¼Œæ¨¡å—å¼€å‘äººå‘˜å¯èƒ½éœ€è¦ç¦ç”¨å†…ç½®æ¨¡å—æ¥å¾—åˆ°ä¸€ä¸ªâ€œå¹²å‡€â€çš„ç¯å¢ƒæ¥åˆ›å»ºè‡ªå·±çš„æ¨¡å—ã€‚è¦ç¦ç”¨å†…ç½®æ¨¡å—ï¼Œæˆ–ä¿®æ”¹éœ€è¦å¯åŠ¨çš„æ¨¡å—ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹`config/config.development.js`æ¥å®ç°ï¼Œå¦‚ä¸‹ï¼š

```javascript
export default {
  modules: [
    // {
    //     name: 'db',
    //     path: 'free-be-mongodb',
    // },
    // 'account',
    // 'core-modules',
    // 'demo',
  ],
  ...
};

```

è¿™é‡Œçš„`modules`å°±æ˜¯éœ€è¦å¯åŠ¨çš„æ¨¡å—åˆ—è¡¨ï¼Œè„šæ‰‹æ¶é»˜è®¤å¯åŠ¨`mongodb`ã€`account`ã€`core-modules`ã€`demo`æ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠä»–ä»¬ä»`modules`åˆ—è¡¨ä¸­ç§»é™¤å³å¯å°†å…¶ç¦ç”¨ã€‚è¿™é‡Œå¯¹æ•°æ®åº“æ¨¡å—çš„å¼•ç”¨æ˜¯å¯¹è±¡çš„å½¢å¼ï¼Œå…³äºè¿™ç§æ–¹å¼çš„ä½¿ç”¨åç»­ä¼šæœ‰è¯¦ç»†çš„ä»‹ç»ã€‚


### åˆ›å»ºæ¨¡å—

æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—ï¼Œåœ¨`modules`ç›®å½•ä¸­æ·»åŠ ä¸€ä¸ªå­ç›®å½•`my-first-module`ï¼Œå…¶ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
-- src
  -- modules
    -- my-first-module
      -- index.js
      -- routers
        -- index.js
        -- route.js
```

å…¶ä¸­`index.js`æ˜¯æˆ‘ä»¬æ–°æ¨¡å—çš„å…¥å£æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹ï¼š

```javascript
// my-first-module/index.js
module.exports = {};
```

ç›®å½•routersä¸ºæ¥å£ä»£ç ç›®å½•ï¼ŒFreeEISä¼šè‡ªåŠ¨ä»è¿™ä¸ªç›®å½•é‡ŒæŒ‰å±‚çº§åŠ è½½æ¥å£å®šä¹‰ã€‚å…¶ä¸­`index.js`æ˜¯`routers`ç›®å½•ä¸­æ¯ä¸ªç›®å½•å±‚çº§éƒ½éœ€è¦æœ‰çš„æ­£å¯¹å½“å‰æ¥å£å±‚çº§çš„ä¸€äº›å®šä¹‰å†…å®¹ï¼Œåé¢è¯¦ç»†è¯´æ˜ï¼Œè¿™é‡Œå…ˆè¿”å›ç©ºå¯¹è±¡ã€‚

```javascript
// my-first-module/routers/index.js
module.exports = {};
```

è€Œ`route.js`ï¼Œæ˜¯æ¥å£å®šä¹‰ä»£ç æ–‡ä»¶ã€‚FreeEISä¼šå°†è¿™äº›ç›®å½•ä¸­é™¤`index.js`ä»¥å¤–çš„`js`æ–‡ä»¶å…¨éƒ¨åšä¸ºæ¥å£å®šä¹‰ä»£ç æ–‡ä»¶åŠ è½½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å±‚çº§ä¸‹çš„æ¥å£æŒ‰éœ€è¦æ‹†åˆ†åˆ°å¤šä¸ªä»£ç æ–‡ä»¶ä¸­ï¼Œåç§°æŒ‰éœ€å®šä¹‰å³å¯ã€‚è¿™é‡Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ª`route.js`æ–‡ä»¶ï¼Œè¿”å›äº†`ExpressJS`çš„`router`å¯¹è±¡ï¼Œä½†è¯¥å¯¹è±¡ä¸­å¹¶æ²¡æœ‰å®šä¹‰æ¥å£ã€‚

```javascript
// my-first-module/routers/route.js

const path = require("path");
const express = require(path.resolve('./') + "/node_modules/express");
const router = express.Router();


module.exports = router;
```

è¿™æ—¶æˆ‘ä»¬å°±å·²ç»æœ‰äº†ä¸€ä¸ªæ–°çš„æ¨¡å—ï¼Œè€Œè¦è®©å®ƒè¢«å¯åŠ¨ï¼Œæˆ‘è¿˜éœ€è¦å°†å®ƒæ·»åŠ åˆ°`config.development.js`çš„`modules`ä¸­ã€‚

```javascript

export default {
  modules: [
    'my-first-module'
  ],
};

```

æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡å—æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰ä»»ä½•æ¥å£ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºæ¥å£ï¼Œåœ¨`route.js`ä¸­æ·»åŠ æ¥å£å®šä¹‰ï¼š

```javascript
// modules/my-first-module/routers/route.js

const path = require("path");
const express = require(path.resolve('./') + "/node_modules/express");
const router = express.Router();

router.get('', (req, res, next) => {
    res.addData(`hello world`);

    return next();
})

module.exports = router;
```

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ¨¡å—ä¸­æœ‰äº†ä¸€ä¸ªæ¥å£ï¼Œä½†æ˜¯æˆ‘ä»¬å´ä¸çŸ¥é“æ€ä¹ˆè°ƒç”¨ä»–ã€‚FreeEISå…è®¸åç«¯æ¨¡å—ä¸æš´éœ²æ¥å£ï¼Œæ‰€ä»¥åœ¨éœ€è¦æš´éœ²æ¥å£çš„æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å‘Šè¯‰FreeEISã€‚æˆ‘ä»¬ä¿®æ”¹æ¨¡å—å…¥å£æ–‡ä»¶å¦‚ä¸‹ï¼š

```javascript
// my-first-module/index.js

module.exports = {
    config: {
        asRouteService: true, // å‘Šè¯‰FreeEISï¼Œæœ¬æ¨¡å—å°†æä¾›æ¥å£è·¯ç”±æœåŠ¡
        routeRoot: 'mymodule',// å½“æ¨¡å—æä¾›æ¥å£è·¯ç”±æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰FreeEISï¼Œæœ¬æ¨¡å—çš„æ¥å£æ ¹è·¯å¾„æ˜¯ä»€ä¹ˆã€‚
    },
}
```

é‡å¯åç«¯æœåŠ¡ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®`http://localhost:8000/api/mymodule`ï¼Œå°†ä¼šå¾—åˆ°`{"data":"hello world","msg":"OK"}`ã€‚

è¿™é‡Œéœ€è¦æ³¨æ„å‡ å¤©ï¼š

 - FreeEISè‡ªåŠ¨ä»æ¨¡å—ä¸­çš„`routers`ç›®å½•åŠ è½½å¸¦æœ‰å±‚çº§ç»“æ„çš„æ¥å£å®šä¹‰ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–åšå…¶ä»–å·¥ä½œï¼Œå°±å¯ä»¥è‡ªåŠ¨æš´éœ²å…¶ä¸­å®šä¹‰çš„æ¥å£ã€‚
 - FreeEISè‡ªåŠ¨åœ¨æ‰€æœ‰çš„æ¥å£å‰é¢æ·»åŠ `/api`ï¼Œåšä¸ºåç«¯æ¥å£çš„å‰ç¼€ï¼Œè¿™ä¸ªå‰ç¼€å¯ä»¥é€šè¿‡ä¿®æ”¹`config/config.default.js`ä¸­çš„`baseUrl`æ¥æ§åˆ¶ã€‚è¿™ä¸ªå‰ç¼€çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå½“æˆ‘ä»¬æœ‰å¤šä¸ªç‰ˆæœ¬çš„åç«¯æœåŠ¡ï¼Œæˆ–åœ¨å¤šä¸ªæœåŠ¡åˆä½œæä¾›åç«¯æ”¯æŒçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ä¸åŒçš„å‰ç¼€æ¥åŒºåˆ†ä¸åŒçš„æ¥å£é›†åˆã€‚
 - éœ€è¦æš´éœ²æ¥å£è·¯ç”±çš„æ¨¡å—ï¼Œéœ€è¦æ˜¾å¼é…ç½®ç›¸åº”é…ç½®é¡¹ï¼Œå¦åˆ™æ¨¡å—ä¸­çš„æ¥å£å°†ä¸ä¼šè¢«åŠ è½½ã€‚


### åŠ¨æ€æ•°æ®

åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»æˆåŠŸå®šä¹‰äº†ä¸€ä¸ªæ–°çš„FreeEISåç«¯æ¨¡å—ï¼Œå¹¶ä¸”æš´éœ²å‡ºä¸€ä¸ªæ–°çš„æ¥å£ï¼Œè¿”å›äº†ä¸€äº›æ•°æ®ã€‚ä½†åœ¨æ›´å¸¸è§çš„æƒ…å†µä¸‹ï¼Œæ¥å£éœ€è¦è¿”å›çš„å†…å®¹æ˜¯å¯å˜çš„ï¼Œè¿™æœ‰ä¸¤ç§æƒ…å†µï¼šä¸€æ˜¯æŸäº›å†…å®¹é€šè¿‡é…ç½®è€Œæ¥ï¼›äºŒæ˜¯æŸäº›å†…å®¹é€šè¿‡æ•°æ®åº“è€Œæ¥ã€‚æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ã€‚

#### æ¨¡å—é…ç½®

åœ¨æˆ‘ä»¬çš„è¿™ä¸ªå®ä¾‹æ¨¡å—ä¸­ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦helloçš„ç›®æ ‡ä¸æ˜¯å›ºå®šçš„'world'ï¼Œ è€Œæ˜¯éœ€è¦æ ¹æ®æƒ…å†µè€Œå®šï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡å—ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®å‚æ•°ï¼Œä½¿å¾—è¿™éƒ¨åˆ†å†…å®¹å¯å˜ã€‚

æˆ‘ä»¬åœ¨æ¨¡å—å…¥å£æ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®å®šä¹‰ï¼ˆè¿™ç§å®šä¹‰å¯ä»¥è¢«å‰¥ç¦»å‡ºæ¥æ”¾åœ¨ä»»ä½•å…¶ä»–æ–‡ä»¶ä¸­ï¼‰ï¼š

```javascript
// my-first-module/index.js

module.exports = {
    config: {
        asRouteService: true,
        routeRoot: 'mymodule',

        greetingTo: 'world',
    },
}
```

æˆ‘ä»¬åœ¨æ¥å£ä»£ç ä¸­å¼•ç”¨è¿™ä¸ªé…ç½®å‚æ•°ï¼š


```javascript
// modules/my-first-module/routers/route.js

const path = require("path");
const express = require(path.resolve('./') + "/node_modules/express");
const router = express.Router();

router.get('', (req, res, next) => {
    res.addData(`hello ${router.mdl.config.greetingTo}`);

    return next();
})

module.exports = router;
```

è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡`router.mdl.config.greetingTo`æ¥è®¿é—®ä¸Šé¢å®šä¹‰çš„é…ç½®å‚æ•°ã€‚FreeEISè‡ªåŠ¨å°†å½“å‰æ¨¡å—çš„å®ä¾‹æ”¹åœ¨åˆ°äº†`router.mdl`ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¿é—®å½“å‰æ¨¡å—å…¥å£æ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰ä¿¡æ¯ã€‚

é‡å¯åç«¯æœåŠ¡ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®`http://localhost:8000/api/mymodule`ï¼Œä¾ç„¶ä¼šå¾—åˆ°`{"data":"hello world","msg":"OK"}`ï¼Œä½†è¿™é‡Œçš„`world`æ˜¯åŠ¨æ€çš„å†…å®¹ã€‚

#### æ•°æ®åº“

å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œæ•°æ®æ¥è‡ªæ•°æ®åº“ã€‚å¦‚æœæˆ‘ä»¬çš„æ¨¡å—éœ€è¦æ•°æ®åº“æ”¯æŒï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰æ‰€éœ€è¦çš„æ•°æ®æ¨¡å‹ï¼Œè¿™åœ¨FreeEISåç«¯ä¸­éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨æ¨¡å—çš„å…¥å£æ–‡ä»¶ä¸­åƒè¿™æ ·å®šä¹‰ï¼š


```javascript
// my-first-module/index.js

module.exports = {
    config: {
        asRouteService: true,
        routeRoot: 'mymodule',

        greetingTo: 'world',
    },
    data: {
        world: {
            Name: { type: 'String', required: true },
            Size: { type: 'String', default: 'large', },
        },
    },
}
```

è¿™ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨å½“å‰æ¨¡å—ä¸­æ·»åŠ äº†ä¸€ä¸ªå«`world`çš„æ•°æ®æ¨¡å‹ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå­—æ®µï¼Œ`Name`å’Œ`Size`ã€‚è¿™æ ·ï¼ŒFreeEISå³å¯è‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆå¯¹åº”çš„æ•°æ®æ¨¡å‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»æˆ‘ä»¬çš„æ¥å£ä»£ç ä¸­è°ƒç”¨æ­¤æ•°æ®æ¨¡å‹ï¼š



```javascript
// my-first-module/routers/route.js

...
router.get('/', async (req, res, next) => {
    const worldsCount = await res.app.models.world.countDocuments({});
    res.addData(`hello ${worldsCount} worlds`);

    return next();
})
...

```

ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡`res.app.models.world`è®¿é—®åˆ°æˆ‘ä»¬æ–°å®šä¹‰çš„æ•°æ®æ¨¡å‹ï¼Œå¹¶è°ƒç”¨`countDocuments`æ–¹æ³•æ¥è¿”å›æ•°æ®æ¡æ•°ã€‚


ä½†è¿™æ—¶é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå¹¶ä¸èƒ½å¾—åˆ°æœŸæœ›çš„ç»“æœï¼Œæ˜¯å› ä¸ºFreeEISä¸­å¯¹æ•°æ®åº“çš„æ”¯æŒä¹Ÿåšä¸ºç‹¬ç«‹çš„æ¨¡å—å­˜åœ¨ï¼Œé»˜è®¤FreeEISæä¾›äº†å†…ç½®çš„`MongoDB`æ•°æ®åº“æ”¯æŒï¼Œéœ€è¦é€šè¿‡å°†å…¶åŠ å…¥åˆ°`config/config.development.js`çš„`modules`åˆ—è¡¨ä¸­æ¥å¯ç”¨ï¼š


```javascript
export default {
  modules: [
    {
        name: 'db',
        path: 'free-be-mongodb',
    },
    'my-first-module'
  ],
};

```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„`modules`åˆ—è¡¨ä¸­å„é¡¹çš„é¡ºåºï¼Œå› ä¸ºæˆ‘ä»¬çš„`my-first-module`éœ€è¦ä½¿ç”¨`mongodb`æ¨¡å—ä¸­çš„èƒ½åŠ›ï¼Œæ‰€ä»¥éœ€è¦å°†`mongodb`æ¨¡å—æ”¾åœ¨å‰é¢ï¼Œä»¥ä¼˜å…ˆåŠ è½½ã€‚è¿™å¯ä»¥é€šè¿‡å¦å¤–ä¸€ç§æ–¹å¼æ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼Œå°±æ˜¯å°†`mongodb`æ¨¡å—æ·»åŠ åˆ°`my-first-module`çš„ä¾èµ–åˆ—è¡¨ä¸­ï¼š

```javascript
  ...
  config: {
      asRouteService: true,
      routeRoot: 'mymodule',
      dependencies: [
          'db'
      ],

      greetingTo: 'world',
  },

  ...
```


è¿™æ ·FreeEISåœ¨åŠ è½½æ¨¡å—åˆ—è¡¨çš„æ—¶å€™ï¼Œå³ä¾¿`db`æ¨¡å—åœ¨`my-first-module`æ¨¡å—çš„åé¢ï¼Œä¹Ÿä¼šå…ˆåŠ è½½`db`ä»¥ç¡®ä¿æŒ‰æ­£ç¡®çš„ä¾èµ–å…³ç³»åŠ è½½æ‰€æœ‰çš„æ¨¡å—ã€‚

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„`db`æ¨¡å—æ˜¯`free-be-mongodb`ï¼Œä½†ç°å®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä½¿ç”¨å…¶ä»–çš„æ•°æ®åº“ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¼•å…¥å¦ä¸€ä¸ªæ•°æ®åº“æ¨¡å—ï¼Œæ¯”å¦‚`freeeis-mysql`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¼•å…¥æ­¤æ•°æ®åº“æ¨¡å—çš„æ–¹å¼åº”è¯¥ä¸ºï¼š


```javascript

export default {
  modules: [
    {
        name: 'db',
        path: 'freeeis-mysql',
    },
    'my-first-module'
  ],
};

```

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å…è®¸åœ¨æ¨¡å—åˆ—è¡¨ä¸­ä½¿ç”¨å¯¹è±¡çš„å½¢å¼ï¼Œå› ä¸ºåƒ`db`è¿™ç±»æ¯”è¾ƒé€šç”¨çš„æ¨¡å—ï¼Œå¯èƒ½æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œè¿™ä½¿å¾—åƒ`my-first-module`è¿™æ ·çš„æ¨¡å—ï¼Œåªéœ€è¦å£°æ˜ä»–ä¾èµ–äº`db`æ¨¡å—ï¼Œè€Œä¸éœ€è¦å…³å¿ƒç³»ç»Ÿé›†æˆè€…ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªæ•°æ®åº“æ¨¡å—ã€‚å½“ç„¶ï¼Œè¿™è¦æ±‚æ‰€æœ‰çš„æ•°æ®åº“æ¨¡å—éƒ½æš´éœ²äº†ç›¸åŒçš„æ¥å£æˆ–æ–¹æ³•ï¼Œè¿™åœ¨è®²åˆ°å†…ç½®æ¨¡å—ä¸­çš„æ•°æ®åº“æ¨¡å—æ—¶ä¼šæœ‰è¯¦ç»†çš„è®²è§£ã€‚


### æ¨¡å—ä½¿ç”¨è€…è¦†ç›–æ¨¡å—é…ç½®é¡¹

å›åˆ°æˆ‘ä»¬çš„æ¥å£å®šä¹‰æ–‡ä»¶ä¸­ï¼Œå°†å…¶æ”¹ä¸ºï¼š


```javascript
// my-first-module/routers/route.js

...
router.get('/', (req, res, next) => {
    res.addData(`hello ${router.mdl.config.greetingTo}`);

    return next();
})

router.get('/count', async (req, res, next) => {
    const worldsCount = await res.app.models.world.countDocuments({});
    res.addData(`hello ${worldsCount} worlds`);

    return next();
})

...
```

è¿™é‡Œæˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªæ¥å£ä¸­è¿”å›äº†å¸¦æœ‰`greetingTo`çš„å­—ç¬¦ä¸²ã€‚è¿™æ—¶ï¼Œå‡è®¾æˆ‘ä»¬çš„`my-first-module`å·²ç»å¼€å‘å®Œæˆï¼Œç³»ç»Ÿé›†æˆè€…æˆ–å…¶ä»–å¸Œæœ›ä½¿ç”¨æ­¤æ¨¡å—çš„å¼€å‘è€…ï¼Œå¯èƒ½éœ€è¦å¯¹æˆ‘ä»¬å®šä¹‰çš„`greetingTo`é…ç½®é¡¹è¿›è¡Œæ›´å¤šçš„æ§åˆ¶ï¼Œä»–å¯ä»¥è¿™æ ·åšï¼š

```javascript
// config/config.development.js

export default {
  modules: [
    'my-first-module',
    {
        name: 'db',
        path: 'free-be-mongodb',
    },
  ],

  'my-first-module': {
    greetingTo: 'FreeEIS'
  },
};

```

è¿™æ—¶ï¼Œé‡å¯åç«¯æœåŠ¡ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®`http://localhost:8000/api/mymodule`ï¼Œä¼šå¾—åˆ°`{"data":"hello FreeEIS","msg":"OK"}`ã€‚è¿™ç»™ç³»ç»Ÿé›†æˆè€…æˆ–æ¨¡å—ä½¿ç”¨è€…äº†å……åˆ†çš„è‡ªç”±æ¥æ§åˆ¶æ¨¡å—çš„å¯å˜å‚æ•°ã€‚


### å¤šè¯­è¨€æ”¯æŒ

FreeEISåç«¯ä¹Ÿæ”¯æŒå¤šè¯­è¨€ï¼Œä»¥åº”å¯¹æŸäº›å›ºå®šå­—ç¬¦ä¸²ä»åç«¯è¿”å›æ—¶çš„ç¿»è¯‘é—®é¢˜ã€‚

ç»§ç»­ä½¿ç”¨ä¸Šé¢æˆ‘ä»¬åˆ›å»ºçš„æ¨¡å—ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦å¯¹`hello`è¿™ä¸ªè¯è¿›è¡Œä¸­æ–‡å’Œè‹±æ–‡çš„æ”¯æŒï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¨¡å—å…¥å£æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”ç¿»è¯‘å­—å…¸çš„å®šä¹‰ï¼š


```javascript
  ...
  config: {
      asRouteService: true,
      routeRoot: 'mymodule',
      dependencies: [
          'db'
      ],

      greetingTo: 'world',
  },
  i18n: {
      'en-us': {
          hello: 'hi',
      },
      'zh-cn': {
          hello: 'ä½ å¥½',
      },
  },

  ...

```

è¿™é‡Œçš„`i18n`æ˜¾ç„¶ä¹Ÿå¯ä»¥å‰¥ç¦»å‡ºæ¥å•ç‹¬å­˜æ”¾å¹¶åœ¨è¿™é‡Œå¼•å…¥ã€‚

è¿™æ—¶ï¼Œé‡å¯åç«¯æœåŠ¡ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®`http://localhost:8000/api/mymodule`ï¼Œä¼šå¾—åˆ°`{"data":"ä½ å¥½ FreeEIS","msg":"OK"}`ã€‚FreeEISåç«¯ä¹Ÿä¼šåœ¨ä¸èƒ½ç¡®å®šå½“å‰ç¿»è¯‘è¯­è¨€æ—¶ï¼Œä½¿ç”¨ä¸­æ–‡åšä¸ºé»˜è®¤è¯­è¨€ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹`app.ctx.locale`ï¼Œæˆ–è€…ç»™`t()`å‡½æ•°ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ¥æ§åˆ¶ç¿»è¯‘è¯­è¨€ï¼š


```javascript
// my-first-module/routers/route.js

...
router.get('/', (req, res, next) => {
    res.app.ctx.locale = 'en-us';

    res.addData(`${router.mdl.t('hello', 'en-us')} ${router.mdl.config.greetingTo}`);

    return next();
})

...
```

ä½†è¿™é‡Œï¼Œåªæ˜¯ç¤ºæ„æ€§çš„ï¼Œæ›´å¸¸è§çš„æ–¹å¼æ˜¯é€šè¿‡å‰ç«¯ä¼ å…¥çš„å½“å‰è¯­è¨€ï¼Œæ¥å†³å®šä½¿ç”¨å“ªç§è¯­è¨€è¿›è¡Œç¿»è¯‘ã€‚æ¯”å¦‚ï¼š


```javascript
// my-first-module/routers/route.js

...
router.get('/', (req, res, next) => {
    const locale = req.query.locale;

    res.addData(`${router.mdl.t('hello', locale)} ${router.mdl.config.greetingTo}`);

    return next();
})

...
```

å½“æˆ‘ä»¬æœ‰æ›´å¤šçš„è¯­è¨€éœ€è¦æ”¯æŒæ—¶ï¼Œåªè¦åœ¨i18nä¸­æ·»åŠ ç›¸åº”çš„ç¿»è¯‘å­—å…¸å³å¯ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æ·»åŠ å¦ä¸€ç§è¯­è¨€ï¼Œå¦‚ä¸‹ï¼š


```javascript
  ...
  i18n: {
      'en-us': {
          hello: 'hi',
      },
      'zh-cn': {
          hello: 'ä½ å¥½',
      },
      'ç«æ˜Ÿè¯­': {
          hello: 'ğŸš€ğŸš€ğŸš€',
      },
  },
  ...
```


æˆ‘ä»¬ç›´æ¥ä½¿ç”¨`ç«æ˜Ÿè¯­`å¯¹`hello`è¿›è¡Œç¿»è¯‘ï¼š


```javascript
// my-first-module/routers/route.js

...
router.get('/', (req, res, next) => {
    res.addData(`${router.mdl.t('hello', 'ç«æ˜Ÿè¯­')} ${router.mdl.config.greetingTo}`);

    return next();
})

...
```


è¿™æ—¶ï¼Œé‡å¯åç«¯æœåŠ¡ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®`http://localhost:8000/api/mymodule`ï¼Œä¼šå¾—åˆ°`{"data":"ğŸš€ğŸš€ğŸš€ FreeEIS","msg":"OK"}`ã€‚
